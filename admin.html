<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>REMANANCE | Admin Panel</title>
<style>
body{background:#050505;color:#fff;font-family:Arial;padding:20px}
h2{margin-top:30px}
input,select,button{
  background:#111827;
  color:#fff;
  border:1px solid #333;
  padding:8px;
  margin:4px 0;
}
button{cursor:pointer}
.news-row{
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid #222;
  padding:6px 0;
}
</style>
</head>
<body>

<h1>ADMIN PANEL</h1>

<h2>Şehir Durumu Güncelle</h2>
<select id="city">
  <option value="34">İSTANBUL</option>
  <option value="06">ANKARA</option>
  <option value="35">İZMİR</option>
</select>

<select id="status">
  <option value="safe">CONTROLLED</option>
  <option value="active">ACTIVE REMANANCE</option>
  <option value="total">TOTAL REMANANCE</option>
</select>

<input id="pop" type="number" placeholder="Nüfus">
<button onclick="updateCity()">GÜNCELLE</button>

<h2>Haber Yönetimi</h2>
<input id="newsText" placeholder="Yeni haber">
<button onclick="addNews()">EKLE</button>

<div id="newsList"></div>

<h2>Citizen Oluştur</h2>
<input id="n" placeholder="İsim">
<input id="s" placeholder="Soyisim">
<select id="c">
  <option>İSTANBUL</option>
  <option>ANKARA</option>
  <option>İZMİR</option>
</select>
<button onclick="addCitizen()">OLUŞTUR</button>

<script src="core.js"></script>
<script>
function updateCity(){
  const cities=getCities();
  const id=city.value;
  cities[id].status=status.value;
  if(pop.value) cities[id].population=parseInt(pop.value);
  saveCities(cities);
  alert("Şehir güncellendi");
}

function addNews(){
  const n=getNews();
  n.unshift({id:Date.now(), text:newsText.value});
  saveNews(n);
  newsText.value="";
  renderNewsAdmin();
}

function deleteNews(id){
  let n=getNews().filter(x=>x.id!==id);
  saveNews(n);
  renderNewsAdmin();
}

function renderNewsAdmin(){
  const box=document.getElementById("newsList");
  box.innerHTML="";
  getNews().forEach(n=>{
    const d=document.createElement("div");
    d.className="news-row";
    d.innerHTML=`<span>${n.text}</span>
                 <button onclick="deleteNews(${n.id})">SİL</button>`;
    box.appendChild(d);
  });
}

function addCitizen(){
  const arr=getCitizens();
  const code=Math.random().toString(36).substr(2,6).toUpperCase();
  arr.push({
    code,
    name:n.value,
    surname:s.value,
    city:c.value
  });
  saveCitizens(arr);
  alert("Citizen Code: "+code);
}

renderNewsAdmin();
</script>
</body>
</html>
